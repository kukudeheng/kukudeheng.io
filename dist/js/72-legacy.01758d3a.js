(self["webpackChunkvue_x"]=self["webpackChunkvue_x"]||[]).push([[72],{92072:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return D}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("van-nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[n("img",{staticStyle:{height:"80%"},attrs:{src:"http://xpzll.gitee.io/hmtt-76/img/logo.4653c8be.png",alt:""}})]},proxy:!0},{key:"right",fn:function(){return[n("van-button",{staticStyle:{height:"70%"},attrs:{icon:"search",round:""},on:{click:function(e){return t.$router.push("/seach")}}},[t._v("搜索")])]},proxy:!0}])}),n("div",{staticClass:"navigate"},[n("van-tabs",{staticClass:"tabs",model:{value:t.currIndex,callback:function(e){t.currIndex=e},expression:"currIndex"}},t._l(t.list,(function(t,e){return n("van-tab",{key:e,attrs:{title:t.name}},[n("listhome",{attrs:{id:t.id}})],1)})),1),n("van-icon",{staticClass:"icon",attrs:{name:"wap-nav"},on:{click:t.showedit}})],1),n("channgedit",{ref:"edit",attrs:{list:t.list,currIndex:t.currIndex},on:{addlist:t.addlist,delList:t.delList,setList:t.setList}})],1)},r=[],s=n(67906),a=n(16198),o=(n(38862),n(21249),n(40561),n(25972)),c=function(){return(0,o.Z)({url:"/v1_0/user/channels"})},u=function(t){return(0,o.Z)({url:"/v1_0/articles",params:t})},l=function(){return(0,o.Z)({url:"/v1_0/channels"})},d=function(t){return(0,o.Z)({url:"/v1_0/user/channels",method:"put",data:t})},f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"atticlist",staticClass:"listhome",on:{scroll:t.scrolleven}},[n("van-pull-refresh",{on:{refresh:t.refresh},model:{value:t.refreshLoading,callback:function(e){t.refreshLoading=e},expression:"refreshLoading"}},[t.bol?n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.load},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,i){return n("div",{key:i,staticClass:"item",on:{click:function(n){return t.$router.push("@/views/article/"+e.art_id)}}},[n("h3",{staticClass:"tltle"},[t._v(t._s(e.title))]),n("div",{staticClass:"img"},t._l(e.cover.images,(function(t,i){return n("img",{key:i,style:{width:1/e.cover.images.length*100+"%"},attrs:{src:t,alt:""}})})),0),n("div",{staticClass:"other"},[n("span",{staticClass:"name"},[t._v(t._s(e.aut_name))]),n("span",{staticClass:"comment"},[t._v(t._s(e.comm_count)+"评论")]),n("span",{staticClass:"time"},[t._v(t._s(e.pubdate))])])])})),0):t._e()],1)],1)},h=[],p=n(68932),v=(n(9653),{name:"VueXListhome",data:function(){return{bol:!0,refreshLoading:!1,loading:!1,finished:!1,list:[],timestamp:Date.now(),scrolltop:0}},props:{id:{type:Number,required:!0}},mounted:function(){},created:function(){},methods:{refresh:function(){var t=this;this.refreshLoading=!1,this.loading=!1,this.finished=!1,this.list=[],this.timestamp=Date.now(),this.bol=!1,this.$nextTick((function(){t.bol=!0}))},getData:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){var n,i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u({channel_id:t.id,timestamp:t.timestamp});case 2:i=e.sent,t.loading=!1,(n=t.list).push.apply(n,(0,p.Z)(i.data.data.results)),t.timestamp=i.data.data.pre_timestamp,t.timestamp||(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},load:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:case"end":return e.stop()}}),e)})))()},scrolleven:function(t){this.scrolltop=t.target.scrollTop}},activated:function(){this.$refs.atticlist.scrollTop=this.scrolltop}}),m=v,g=n(1001),x=(0,g.Z)(m,f,h,!1,null,"37a0c760",null),b=x.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-action-sheet",{attrs:{title:"频道管理"},on:{closed:function(e){t.isEdit=!1}},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"top"},[n("span",{staticClass:"pindao"},[t._v("我的频道")]),n("van-button",{attrs:{plain:"",type:"danger",size:"small"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"取消":"编辑"))])],1),n("van-grid",t._l(t.list,(function(e,i){return n("van-grid-item",{key:e.id},[n("div",{class:{active:t.currIndex===i},on:{click:function(e){return t.iconitem(i)}}},[t._v(" "+t._s(e.name)+" ")]),t.isEdit&&"推荐"!==e.name?n("van-icon",{staticClass:"icon",attrs:{name:"cross"},on:{click:function(e){return t.iconclick(i)}}}):t._e()],1)})),1),n("div",{staticClass:"bottom"},[n("div",{staticClass:"kexuan"},[t._v("可选频道")])]),n("van-grid",t._l(t.newlist,(function(e){return n("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(n){return t.$emit("addlist",e)}}})})),1)],1)])],1)},_=[],y=(n(57327),n(41539),n(69826),{name:"VueXChanngedit",data:function(){return{sheet:!1,alllist:[],isEdit:!1}},props:{list:{type:Array,required:!0},currIndex:{type:Number,required:!0}},mounted:function(){},created:function(){this.getData()},methods:{getData:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:n=e.sent,t.alllist=n.data.data.channels;case 4:case"end":return e.stop()}}),e)})))()},iconclick:function(t){this.$emit("delList",t),this.currIndex>t&&this.currIndex>0&&this.$emit("setList",this.currIndex-1)},iconitem:function(t){this.$emit("setList",t),this.sheet=!1}},computed:{newlist:function(){var t=this;return this.alllist.filter((function(e){var n=t.list.find((function(t){return e.id===t.id}));return!n}))}}}),w=y,C=(0,g.Z)(w,k,_,!1,null,"6db456e6",null),Z=C.exports,I=n(57189),L={data:function(){return{list:[],currIndex:0}},created:function(){var t=(0,I.nJ)("list");t?this.$store.state.token.token?this.getData():this.list=JSON.parse(t):this.getData()},methods:{savelist:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((0,I.b4)("list",JSON.stringify(t.list)),!t.$store.state.token.token){e.next=5;break}return n=t.list.map((function(t,e){return{id:t.id,seq:e}})),e.next=5,d({channels:n});case 5:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:n=e.sent,t.list=n.data.data.channels,t.savelist();case 5:case"end":return e.stop()}}),e)})))()},showedit:function(){this.$refs.edit.sheet=!0},addlist:function(t){this.list.push(t),this.savelist()},delList:function(t){this.list.splice(t,1)},setList:function(t){this.currIndex=t,this.savelist()}},components:{listhome:b,channgedit:Z}},$=L,A=(0,g.Z)($,i,r,!1,null,"701a4f8c",null),D=A.exports},91038:function(t,e,n){var i=n(82109),r=n(48457),s=n(17072),a=!s((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:a},{from:r})},57189:function(t,e,n){"use strict";n.d(e,{nJ:function(){return c},b4:function(){return u}});n(47042),n(74916),n(15306),n(23123),n(69600),n(43371);
/*! js-cookie v3.0.1 | MIT */
function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var r={read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function s(t,e){function n(n,r,s){if("undefined"!==typeof document){s=i({},e,s),"number"===typeof s.expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in s)s[o]&&(a+="; "+o,!0!==s[o]&&(a+="="+s[o].split(";")[0]));return document.cookie=n+"="+t.write(r,n)+a}}function r(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var s=n[r].split("="),a=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(i[o]=t.read(a,o),e===o)break}catch(c){}}return e?i[e]:i}}return Object.create({set:n,get:r,remove:function(t,e){n(t,"",i({},e,{expires:-1}))},withAttributes:function(t){return s(this.converter,i({},this.attributes,t))},withConverter:function(t){return s(i({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var a=s(r,{path:"/"}),o=a;function c(t){return o.get(t)}function u(t,e){o.set(t,e)}},23748:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,{Z:function(){return i}})},68932:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var i=n(23748);function r(t){if(Array.isArray(t))return(0,i.Z)(t)}n(82526),n(41817),n(41539),n(32165),n(78783),n(33948),n(91038);function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var a=n(48936);n(21703);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||s(t)||(0,a.Z)(t)||o()}},48936:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});n(47042),n(41539),n(68309),n(91038),n(78783),n(74916),n(77601);var i=n(23748);function r(t,e){if(t){if("string"===typeof t)return(0,i.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=72-legacy.01758d3a.js.map