(self["webpackChunkvue_x"]=self["webpackChunkvue_x"]||[]).push([[725],{52725:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("van-nav-bar",{attrs:{title:"文章详情","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(e){return t.$router.go(-1)}}}),n("div",{staticClass:"content"},[n("h3",{staticClass:"title"},[t._v(t._s(t.info.title))]),n("div",{staticClass:"info"},[n("img",{staticClass:"tu",attrs:{src:t.info.aut_photo,alt:""}}),n("div",{staticClass:"add"},[n("div",{staticClass:"name"},[t._v(t._s(t.info.aut_name))]),n("div",{staticClass:"san"},[t._v(t._s(t._f("formatData")(t.info.pubdate)))])]),n("van-button",{attrs:{type:"info",round:"",size:"small"}},[t._v("+ 关注")])],1),n("div",{staticClass:"mian",domProps:{innerHTML:t._s(t.info.content)}}),n("van-divider",[t._v("end")]),n("div",{staticClass:"btn"},[n("van-button",{staticClass:"btn-left",attrs:{plain:"",hairline:"",type:"primary",round:"",size:"normal",icon:"good-job-o"}},[t._v("点赞")]),n("van-button",{staticStyle:{"margin-left":"25px"},attrs:{plain:"",hairline:"",type:"danger",round:"",size:"normal",icon:"delete-o"}},[t._v("不喜欢")])],1)],1),n("commponent")],1)},s=[],i=n(67906),r=n(16198),o=n(25972),c=function(t){return(0,o.Z)({url:"/v1_0/articles/".concat(t)})},l=function(t){return(0,o.Z)({url:"/v1_0/comments",params:t})},u=function(t){return(0,o.Z)({url:"/v1_0/comments",method:"POST",data:t})},d=function(t,e){return e?e?(0,o.Z)({url:"/v1_0/comment/likings/"+t.target,method:"delete"}):void 0:(0,o.Z)({url:"/v1_0/comment/likings",method:"post",data:t})},m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commponent"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("div",{key:a,staticClass:"item"},[n("img",{staticClass:"tu",attrs:{src:e.aut_photo,alt:""}}),n("div",{staticClass:"middle"},[n("div",{staticClass:"name"},[t._v(t._s(e.aut_name))]),n("div",{staticClass:"dasuan"},[t._v(t._s(e.content))]),n("div",{staticClass:"time"},[n("span",{staticClass:"curr-time"},[t._v(t._s(t._f("formatData")(e.pubdate)))]),n("span",{on:{click:function(n){return t.reclick(e)}}},[t._v("回复"+t._s(e.reply_count))])])]),n("van-icon",{class:{add:e.is_liking},attrs:{name:"like-o"},on:{click:function(n){return t.likeclisk(e)}}})],1)})),0),n("div",{staticClass:"bottom"},[n("van-field",{attrs:{placeholder:"请输入评论内容"},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"info"},on:{click:t.submit}},[t._v("发布")])]},proxy:!0}]),model:{value:t.msg,callback:function(e){t.msg="string"===typeof e?e.trim():e},expression:"msg"}})],1),t.bol?n("recommponet",{ref:"reCommponet",on:{refrecommponet:t.refrecommponet}}):t._e()],1)},f=[],v=n(68932),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-action-sheet",{attrs:{title:"发表回复"},on:{closed:t.closedEvent},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"main"},[n("div",{staticClass:"item"},[n("img",{staticClass:"tu",attrs:{src:t.reitem.aut_photo,alt:""}}),n("div",{staticClass:"middle"},[n("div",{staticClass:"name"},[t._v(t._s(t.reitem.aut_name))]),n("div",{staticClass:"dasuan"},[t._v(t._s(t.reitem.content))]),n("div",{staticClass:"time"},[n("span",{staticClass:"curr-time"},[t._v(t._s(t._f("formatData")(t.reitem.pubdate)))])])])])]),n("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"},attrs:{"color:":""}},[t._v("回复列表")]),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有了"},on:{load:t.getData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("div",{key:a,staticClass:"item"},[n("img",{staticClass:"tu",attrs:{src:e.aut_photo,alt:""}}),n("div",{staticClass:"middle"},[n("div",{staticClass:"name"},[t._v(t._s(e.aut_name))]),n("div",{staticClass:"dasuan"},[t._v(t._s(e.content))]),n("div",{staticClass:"time"},[n("span",{staticClass:"curr-time"},[t._v(t._s(t._f("formatData")(e.pubdate)))])])])])})),0),n("div",{staticClass:"bottom"},[n("van-field",{attrs:{placeholder:"请输入评论内容"},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"info"},on:{click:t.submit}},[t._v("回复")])]},proxy:!0}]),model:{value:t.msg,callback:function(e){t.msg="string"===typeof e?e.trim():e},expression:"msg"}})],1)],1)},_=[],h={name:"VueXRecommponet",data:function(){return{msg:"",show:!1,reitem:"",offset:null,list:[],loading:!1,finished:!1}},mounted:function(){},methods:{getData:function(){var t=this;return(0,r.Z)((0,i.Z)().mark((function e(){var n,a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l({type:"c",source:t.reitem.com_id,offset:t.offset,limit:1});case 2:a=e.sent,t.loading=!1,(n=t.list).push.apply(n,(0,v.Z)(a.data.data.results)),t.offset=a.data.data.last_id,a.data.data.last_id===a.data.data.end_id&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},closedEvent:function(){this.$emit("refreComments")},submit:function(){var t=this;return(0,r.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.msg){e.next=3;break}return t.$toast.fail("请选输入内容后再评论"),e.abrupt("return");case 3:return e.next=5,u({target:t.reitem.com_id,content:t.msg,art_id:t.$route.params.id});case 5:n=e.sent,t.$toast.success("评论成功"),t.list.unshift(n.data.data.new_obj),t.msg="";case 9:case"end":return e.stop()}}),e)})))()}}},g=h,b=n(1001),C=(0,b.Z)(g,p,_,!1,null,"1871a814",null),k=C.exports,y={name:"VueXCommponent",components:{recommponet:k},data:function(){return{msg:"",list:[],loading:!1,finished:!1,offset:null,bol:!0}},mounted:function(){},created:function(){},methods:{getData:function(){var t=this;return(0,r.Z)((0,i.Z)().mark((function e(){var n,a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l({type:"a",source:t.$route.params.id,offset:t.offset,limit:1});case 2:a=e.sent,t.loading=!1,(n=t.list).push.apply(n,(0,v.Z)(a.data.data.results)),t.offset=a.data.data.last_id,a.data.data.last_id===a.data.data.end_id&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return(0,r.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.msg){e.next=3;break}return t.$toast.fail("请输入内容再评论"),e.abrupt("return");case 3:return e.next=5,u({target:t.$route.params.id,content:t.msg});case 5:n=e.sent,t.$toast.success("发表成功"),t.list.unshift(n.data.data.new_obj),t.msg="",console.log("发表评论",n);case 10:case"end":return e.stop()}}),e)})))()},reclick:function(t){this.$refs.reCommponet.show=!0,this.$refs.reCommponet.reitem=t},refrecommponet:function(){var t=this;this.bol=!1,this.$nextTick((function(){t.bol=!0}))},likeclisk:function(t){var e=this;return(0,r.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,d({target:t.com_id},t.is_liking);case 2:e.$toast.success(t.is_liking?"取消点赞成功":"点赞成功"),t.is_liking=!t.is_liking;case 4:case"end":return n.stop()}}),n)})))()}}},Z=y,x=(0,b.Z)(Z,m,f,!1,null,"bc932444",null),w=x.exports,$={name:"VueXIndex",data:function(){return{id:this.$route.params.id,info:""}},components:{commponent:w},mounted:function(){},created:function(){this.getData()},methods:{getData:function(){var t=this;return(0,r.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c(t.id);case 2:n=e.sent,t.info=n.data.data;case 4:case"end":return e.stop()}}),e)})))()}}},D=$,A=(0,b.Z)(D,a,s,!1,null,"5ba66e27",null),S=A.exports},91038:function(t,e,n){var a=n(82109),s=n(48457),i=n(17072),r=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:r},{from:s})},23748:function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,{Z:function(){return a}})},68932:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var a=n(23748);function s(t){if(Array.isArray(t))return(0,a.Z)(t)}n(82526),n(41817),n(41539),n(32165),n(78783),n(33948),n(91038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=n(48936);n(21703);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return s(t)||i(t)||(0,r.Z)(t)||o()}},48936:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});n(47042),n(41539),n(68309),n(91038),n(78783),n(74916),n(77601);var a=n(23748);function s(t,e){if(t){if("string"===typeof t)return(0,a.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=725-legacy.f513e125.js.map