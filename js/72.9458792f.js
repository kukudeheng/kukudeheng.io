"use strict";(self["webpackChunkvue_x"]=self["webpackChunkvue_x"]||[]).push([[72],{2072:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("van-nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[i("img",{staticStyle:{height:"80%"},attrs:{src:"http://xpzll.gitee.io/hmtt-76/img/logo.4653c8be.png",alt:""}})]},proxy:!0},{key:"right",fn:function(){return[i("van-button",{staticStyle:{height:"70%"},attrs:{icon:"search",round:""},on:{click:function(e){return t.$router.push("/seach")}}},[t._v("搜索")])]},proxy:!0}])}),i("div",{staticClass:"navigate"},[i("van-tabs",{staticClass:"tabs",model:{value:t.currIndex,callback:function(e){t.currIndex=e},expression:"currIndex"}},t._l(t.list,(function(t,e){return i("van-tab",{key:e,attrs:{title:t.name}},[i("listhome",{attrs:{id:t.id}})],1)})),1),i("van-icon",{staticClass:"icon",attrs:{name:"wap-nav"},on:{click:t.showedit}})],1),i("channgedit",{ref:"edit",attrs:{list:t.list,currIndex:t.currIndex},on:{addlist:t.addlist,delList:t.delList,setList:t.setList}})],1)},n=[],a=i(5972);const r=()=>(0,a.Z)({url:"/v1_0/user/channels"}),c=t=>(0,a.Z)({url:"/v1_0/articles",params:t}),o=()=>(0,a.Z)({url:"/v1_0/channels"}),l=t=>(0,a.Z)({url:"/v1_0/user/channels",method:"put",data:t});var d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"atticlist",staticClass:"listhome",on:{scroll:t.scrolleven}},[i("van-pull-refresh",{on:{refresh:t.refresh},model:{value:t.refreshLoading,callback:function(e){t.refreshLoading=e},expression:"refreshLoading"}},[t.bol?i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.load},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,s){return i("div",{key:s,staticClass:"item",on:{click:function(i){return t.$router.push("@/views/article/"+e.art_id)}}},[i("h3",{staticClass:"tltle"},[t._v(t._s(e.title))]),i("div",{staticClass:"img"},t._l(e.cover.images,(function(t,s){return i("img",{key:s,style:{width:1/e.cover.images.length*100+"%"},attrs:{src:t,alt:""}})})),0),i("div",{staticClass:"other"},[i("span",{staticClass:"name"},[t._v(t._s(e.aut_name))]),i("span",{staticClass:"comment"},[t._v(t._s(e.comm_count)+"评论")]),i("span",{staticClass:"time"},[t._v(t._s(e.pubdate))])])])})),0):t._e()],1)],1)},u=[],h={name:"VueXListhome",data(){return{bol:!0,refreshLoading:!1,loading:!1,finished:!1,list:[],timestamp:Date.now(),scrolltop:0}},props:{id:{type:Number,required:!0}},mounted(){},created(){},methods:{refresh(){this.refreshLoading=!1,this.loading=!1,this.finished=!1,this.list=[],this.timestamp=Date.now(),this.bol=!1,this.$nextTick((()=>{this.bol=!0}))},async getData(){const t=await c({channel_id:this.id,timestamp:this.timestamp});this.loading=!1,this.list.push(...t.data.data.results),this.timestamp=t.data.data.pre_timestamp,this.timestamp||(this.finished=!0)},async load(){await this.getData()},scrolleven(t){this.scrolltop=t.target.scrollTop}},activated(){this.$refs.atticlist.scrollTop=this.scrolltop}},f=h,m=i(1001),p=(0,m.Z)(f,d,u,!1,null,"37a0c760",null),v=p.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-action-sheet",{attrs:{title:"频道管理"},on:{closed:function(e){t.isEdit=!1}},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[i("div",{staticClass:"content"},[i("div",{staticClass:"top"},[i("span",{staticClass:"pindao"},[t._v("我的频道")]),i("van-button",{attrs:{plain:"",type:"danger",size:"small"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"取消":"编辑"))])],1),i("van-grid",t._l(t.list,(function(e,s){return i("van-grid-item",{key:e.id},[i("div",{class:{active:t.currIndex===s},on:{click:function(e){return t.iconitem(s)}}},[t._v(" "+t._s(e.name)+" ")]),t.isEdit&&"推荐"!==e.name?i("van-icon",{staticClass:"icon",attrs:{name:"cross"},on:{click:function(e){return t.iconclick(s)}}}):t._e()],1)})),1),i("div",{staticClass:"bottom"},[i("div",{staticClass:"kexuan"},[t._v("可选频道")])]),i("van-grid",t._l(t.newlist,(function(e){return i("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(i){return t.$emit("addlist",e)}}})})),1)],1)])],1)},_=[],x={name:"VueXChanngedit",data(){return{sheet:!1,alllist:[],isEdit:!1}},props:{list:{type:Array,required:!0},currIndex:{type:Number,required:!0}},mounted(){},created(){this.getData()},methods:{async getData(){const t=await o();this.alllist=t.data.data.channels},iconclick(t){this.$emit("delList",t),this.currIndex>t&&this.currIndex>0&&this.$emit("setList",this.currIndex-1)},iconitem(t){this.$emit("setList",t),this.sheet=!1}},computed:{newlist(){return this.alllist.filter((t=>{const e=this.list.find((e=>t.id===e.id));return!e}))}}},k=x,b=(0,m.Z)(k,g,_,!1,null,"6db456e6",null),C=b.exports,y=i(7189),w={data(){return{list:[],currIndex:0}},created(){const t=(0,y.nJ)("list");t?this.$store.state.token.token?this.getData():this.list=JSON.parse(t):this.getData()},methods:{async savelist(){if((0,y.b4)("list",JSON.stringify(this.list)),this.$store.state.token.token){const t=this.list.map(((t,e)=>({id:t.id,seq:e})));await l({channels:t})}},async getData(){const t=await r();this.list=t.data.data.channels,this.savelist()},showedit(){this.$refs.edit.sheet=!0},addlist(t){this.list.push(t),this.savelist()},delList(t){this.list.splice(t,1)},setList(t){this.currIndex=t,this.savelist()}},components:{listhome:v,channgedit:C}},I=w,L=(0,m.Z)(I,s,n,!1,null,"701a4f8c",null),$=L.exports},7189:function(t,e,i){
/*! js-cookie v3.0.1 | MIT */
function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)t[s]=i[s]}return t}i.d(e,{nJ:function(){return o},b4:function(){return l}});var n={read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function a(t,e){function i(i,n,a){if("undefined"!==typeof document){a=s({},e,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var c in a)a[c]&&(r+="; "+c,!0!==a[c]&&(r+="="+a[c].split(";")[0]));return document.cookie=i+"="+t.write(n,i)+r}}function n(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],s={},n=0;n<i.length;n++){var a=i[n].split("="),r=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(s[c]=t.read(r,c),e===c)break}catch(o){}}return e?s[e]:s}}return Object.create({set:i,get:n,remove:function(t,e){i(t,"",s({},e,{expires:-1}))},withAttributes:function(t){return a(this.converter,s({},this.attributes,t))},withConverter:function(t){return a(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var r=a(n,{path:"/"}),c=r;function o(t){return c.get(t)}function l(t,e){c.set(t,e)}}}]);
//# sourceMappingURL=72.9458792f.js.map