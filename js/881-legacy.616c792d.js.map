{"version":3,"file":"js/881-legacy.616c792d.js","mappings":"sJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,QAAQF,EAAG,WAAW,CAACG,IAAI,QAAQ,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIQ,MAAMC,OAAO,MAAQ,MAAM,YAAc,UAAUC,MAAM,CAACC,MAAOX,EAAIY,KAAW,OAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,KAAM,SAAUE,IAAME,WAAW,iBAAiBZ,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIQ,MAAMS,KAAK,MAAQ,MAAM,YAAc,UAAUP,MAAM,CAACC,MAAOX,EAAIY,KAAS,KAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,KAAM,OAAQE,IAAME,WAAW,gBAAgB,GAAGZ,EAAG,MAAM,CAACc,YAAY,OAAO,CAACd,EAAG,aAAa,CAACE,MAAM,CAAC,QAAUN,EAAImB,QAAQ,eAAe,SAAS,MAAQ,GAAG,KAAO,OAAO,MAAQ,IAAIC,GAAG,CAAC,MAAQpB,EAAIqB,SAAS,CAACrB,EAAIsB,GAAG,WAAW,IAAI,IAC1vBC,EAAkB,G,iCCEf,SAASC,EAAgBC,GAC9B,OAAOC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,uBACLC,OAAQ,OACRC,SAAQ,EACRJ,KAAAA,ICyBJ,OACAA,KADA,WAEA,OACAN,SAAAA,EACAP,KAAAA,CACAH,OAAAA,cACAQ,KAAAA,UAEAT,MAAAA,CACAC,OAAAA,CACA,CAAAqB,UAAAA,EAAAC,QAAAA,KAAAC,QAAAA,UACA,CAEAC,QAAAA,6EACAF,QAAAA,YACAC,QAAAA,aAGAf,KAAAA,CACA,CAAAa,UAAAA,EAAAC,QAAAA,KAAAC,QAAAA,UACA,CACAC,QAAAA,UACAF,QAAAA,YACAC,QAAAA,YAEA,OAWAE,QAAAA,CACAb,OADA,WACA,WACA,gBACAc,WACAC,MAFA,uBAEA,iGACAC,QAAAA,IAAAA,MACA,aAFA,kBAIAb,EAAAA,EAAAA,MAJA,OAIAc,EAJA,OAKAD,QAAAA,IAAAA,QAAAA,GACA,wCACA,yBAGA,yCAVA,qDAaAA,QAAAA,IAAAA,EAAAA,IAbA,yBAeA,aAfA,8EAkBAE,OAAA,WACAF,QAAAA,IAAAA,YC5F0Q,I,UCQtQG,GAAY,OACd,EACAzC,EACAwB,GACA,EACA,KACA,WACA,MAIF,EAAeiB,EAAiB","sources":["webpack://vue-x/./src/views/login/index.vue?2084","webpack://vue-x/./src/api/login.js","webpack://vue-x/src/views/login/index.vue","webpack://vue-x/./src/views/login/index.vue?13d0","webpack://vue-x/./src/views/login/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"登录\"}}),_c('van-form',{ref:\"from\"},[_c('van-field',{attrs:{\"rules\":_vm.rules.mobile,\"label\":\"手机号\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.form.mobile),callback:function ($$v) {_vm.$set(_vm.form, \"mobile\", $$v)},expression:\"form.mobile\"}}),_c('van-field',{attrs:{\"rules\":_vm.rules.code,\"label\":\"验证码\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}})],1),_c('div',{staticClass:\"too\"},[_c('van-button',{attrs:{\"loading\":_vm.loading,\"loading-text\":\"加载中...\",\"round\":\"\",\"type\":\"info\",\"block\":\"\"},on:{\"click\":_vm.submit}},[_vm._v(\"点击登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '../utils/request'\r\n\r\n//登录接口\r\nexport function authorizations (data) {\r\n  return request({\r\n    url: '/v1_0/authorizations',\r\n    method: 'post',\r\n    notoken:true,\r\n    data\r\n  })\r\n}\r\n","<template>\r\n  <div>\r\n    <van-nav-bar title=\"登录\"></van-nav-bar>\r\n    <van-form ref=\"from\">\r\n      <van-field\r\n        :rules=\"rules.mobile\"\r\n        v-model=\"form.mobile\"\r\n        label=\"手机号\"\r\n        placeholder=\"请输入手机号\"\r\n      ></van-field>\r\n      <van-field\r\n        :rules=\"rules.code\"\r\n        v-model=\"form.code\"\r\n        label=\"验证码\"\r\n        placeholder=\"请输入验证码\"\r\n      ></van-field>\r\n    </van-form>\r\n    <div class=\"too\">\r\n      <van-button\r\n        :loading=\"loading\"\r\n        loading-text=\"加载中...\"\r\n        round\r\n        type=\"info\"\r\n        block\r\n        @click=\"submit\"\r\n        >点击登录</van-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { authorizations } from '../../api/login'\r\nexport default {\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      form: {\r\n        mobile: '16637046798',\r\n        code: '246810'\r\n      },\r\n      rules: {\r\n        mobile: [\r\n          { required: true, message: '必填', trigger: 'onBlur' },\r\n          {\r\n            // pattern:/^1[3-9]\\d{9}$/,\r\n            pattern: /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,\r\n            message: '请输入正确的手机号',\r\n            trigger: 'onChange'\r\n          }\r\n        ],\r\n        code: [\r\n          { required: true, message: '必填', trigger: 'onBlur' },\r\n          {\r\n            pattern: /^\\d{6}$/,\r\n            message: '请输入六位数验证码',\r\n            trigger: 'onChange'\r\n          },\r\n          {\r\n            // validator:value=>{\r\n            //   return  value==='246810'\r\n            // },\r\n            // message:'验证码错误',\r\n            // trigger:'onChange',\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    submit () {\r\n      this.$refs.from\r\n        .validate()\r\n        .then(async () => {\r\n          console.log('通过')\r\n          this.loading = true\r\n          try {\r\n            const res = await authorizations(this.form)\r\n            console.log('接口返回值', res)\r\n            this.$store.commit('setToken',res.data.data)\r\n            this.$toast.success('登录成功')\r\n            // 跳转到首页\r\n            // 有回跳地址就跳转到跳转地址，没有就跳转到首页\r\n            this.$router.push(this.$route.query.back || '/')\r\n          } catch (error) {\r\n            // this.$toast.fail(error.response.data.message);\r\n            console.log(error)\r\n          } finally {\r\n            this.loading = false\r\n          }\r\n        })\r\n        .catch(() => {\r\n          console.log('失败')\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.van-nav-bar {\r\n  // 导航栏背景颜色\r\n  background-color: #3196fa !important;\r\n\r\n  // 导航栏标题颜色为白色\r\n  ::v-deep.van-nav-bar__title {\r\n    color: #fff;\r\n  }\r\n}\r\n.too {\r\n  padding: 10px 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c7e03c8e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=c7e03c8e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c7e03c8e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","rules","mobile","model","value","form","callback","$$v","$set","expression","code","staticClass","loading","on","submit","_v","staticRenderFns","authorizations","data","request","url","method","notoken","required","message","trigger","pattern","methods","validate","then","console","res","catch","component"],"sourceRoot":""}