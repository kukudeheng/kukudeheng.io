"use strict";(self["webpackChunkvue_x"]=self["webpackChunkvue_x"]||[]).push([[725],{2725:function(t,s,a){a.r(s),a.d(s,{default:function(){return D}});var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"article"},[a("van-nav-bar",{attrs:{title:"文章详情","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(s){return t.$router.go(-1)}}}),a("div",{staticClass:"content"},[a("h3",{staticClass:"title"},[t._v(t._s(t.info.title))]),a("div",{staticClass:"info"},[a("img",{staticClass:"tu",attrs:{src:t.info.aut_photo,alt:""}}),a("div",{staticClass:"add"},[a("div",{staticClass:"name"},[t._v(t._s(t.info.aut_name))]),a("div",{staticClass:"san"},[t._v(t._s(t._f("formatData")(t.info.pubdate)))])]),a("van-button",{attrs:{type:"info",round:"",size:"small"}},[t._v("+ 关注")])],1),a("div",{staticClass:"mian",domProps:{innerHTML:t._s(t.info.content)}}),a("van-divider",[t._v("end")]),a("div",{staticClass:"btn"},[a("van-button",{staticClass:"btn-left",attrs:{plain:"",hairline:"",type:"primary",round:"",size:"normal",icon:"good-job-o"}},[t._v("点赞")]),a("van-button",{staticStyle:{"margin-left":"25px"},attrs:{plain:"",hairline:"",type:"danger",round:"",size:"normal",icon:"delete-o"}},[t._v("不喜欢")])],1)],1),a("commponent")],1)},e=[],n=a(5972);const o=t=>(0,n.Z)({url:`/v1_0/articles/${t}`}),l=t=>(0,n.Z)({url:"/v1_0/comments",params:t}),r=t=>(0,n.Z)({url:"/v1_0/comments",method:"POST",data:t}),c=(t,s)=>s?s?(0,n.Z)({url:"/v1_0/comment/likings/"+t.target,method:"delete"}):void 0:(0,n.Z)({url:"/v1_0/comment/likings",method:"post",data:t});var d=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"commponent"},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getData},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(s,i){return a("div",{key:i,staticClass:"item"},[a("img",{staticClass:"tu",attrs:{src:s.aut_photo,alt:""}}),a("div",{staticClass:"middle"},[a("div",{staticClass:"name"},[t._v(t._s(s.aut_name))]),a("div",{staticClass:"dasuan"},[t._v(t._s(s.content))]),a("div",{staticClass:"time"},[a("span",{staticClass:"curr-time"},[t._v(t._s(t._f("formatData")(s.pubdate)))]),a("span",{on:{click:function(a){return t.reclick(s)}}},[t._v("回复"+t._s(s.reply_count))])])]),a("van-icon",{class:{add:s.is_liking},attrs:{name:"like-o"},on:{click:function(a){return t.likeclisk(s)}}})],1)})),0),a("div",{staticClass:"bottom"},[a("van-field",{attrs:{placeholder:"请输入评论内容"},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info"},on:{click:t.submit}},[t._v("发布")])]},proxy:!0}]),model:{value:t.msg,callback:function(s){t.msg="string"===typeof s?s.trim():s},expression:"msg"}})],1),t.bol?a("recommponet",{ref:"reCommponet",on:{refrecommponet:t.refrecommponet}}):t._e()],1)},m=[],u=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("van-action-sheet",{attrs:{title:"发表回复"},on:{closed:t.closedEvent},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[a("div",{staticClass:"main"},[a("div",{staticClass:"item"},[a("img",{staticClass:"tu",attrs:{src:t.reitem.aut_photo,alt:""}}),a("div",{staticClass:"middle"},[a("div",{staticClass:"name"},[t._v(t._s(t.reitem.aut_name))]),a("div",{staticClass:"dasuan"},[t._v(t._s(t.reitem.content))]),a("div",{staticClass:"time"},[a("span",{staticClass:"curr-time"},[t._v(t._s(t._f("formatData")(t.reitem.pubdate)))])])])])]),a("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"},attrs:{"color:":""}},[t._v("回复列表")]),a("van-list",{attrs:{finished:t.finished,"finished-text":"没有了"},on:{load:t.getData},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(s,i){return a("div",{key:i,staticClass:"item"},[a("img",{staticClass:"tu",attrs:{src:s.aut_photo,alt:""}}),a("div",{staticClass:"middle"},[a("div",{staticClass:"name"},[t._v(t._s(s.aut_name))]),a("div",{staticClass:"dasuan"},[t._v(t._s(s.content))]),a("div",{staticClass:"time"},[a("span",{staticClass:"curr-time"},[t._v(t._s(t._f("formatData")(s.pubdate)))])])])])})),0),a("div",{staticClass:"bottom"},[a("van-field",{attrs:{placeholder:"请输入评论内容"},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info"},on:{click:t.submit}},[t._v("回复")])]},proxy:!0}]),model:{value:t.msg,callback:function(s){t.msg="string"===typeof s?s.trim():s},expression:"msg"}})],1)],1)},f=[],v={name:"VueXRecommponet",data(){return{msg:"",show:!1,reitem:"",offset:null,list:[],loading:!1,finished:!1}},mounted(){},methods:{async getData(){const t=await l({type:"c",source:this.reitem.com_id,offset:this.offset,limit:1});this.loading=!1,this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,t.data.data.last_id===t.data.data.end_id&&(this.finished=!0)},closedEvent(){this.$emit("refreComments")},async submit(){if(""===this.msg)return void this.$toast.fail("请选输入内容后再评论");const t=await r({target:this.reitem.com_id,content:this.msg,art_id:this.$route.params.id});this.$toast.success("评论成功"),this.list.unshift(t.data.data.new_obj),this.msg=""}}},_=v,h=a(1001),p=(0,h.Z)(_,u,f,!1,null,"1871a814",null),g=p.exports,C={name:"VueXCommponent",components:{recommponet:g},data(){return{msg:"",list:[],loading:!1,finished:!1,offset:null,bol:!0}},mounted(){},created(){},methods:{async getData(){const t=await l({type:"a",source:this.$route.params.id,offset:this.offset,limit:1});this.loading=!1,this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,t.data.data.last_id===t.data.data.end_id&&(this.finished=!0)},async submit(){if(""===this.msg)return void this.$toast.fail("请输入内容再评论");const t=await r({target:this.$route.params.id,content:this.msg});this.$toast.success("发表成功"),this.list.unshift(t.data.data.new_obj),this.msg="",console.log("发表评论",t)},reclick(t){this.$refs.reCommponet.show=!0,this.$refs.reCommponet.reitem=t},refrecommponet(){this.bol=!1,this.$nextTick((()=>{this.bol=!0}))},async likeclisk(t){await c({target:t.com_id},t.is_liking),this.$toast.success(t.is_liking?"取消点赞成功":"点赞成功"),t.is_liking=!t.is_liking}}},b=C,k=(0,h.Z)(b,d,m,!1,null,"bc932444",null),y=k.exports,x={name:"VueXIndex",data(){return{id:this.$route.params.id,info:""}},components:{commponent:y},mounted(){},created(){this.getData()},methods:{async getData(){const t=await o(this.id);this.info=t.data.data}}},$=x,w=(0,h.Z)($,i,e,!1,null,"5ba66e27",null),D=w.exports}}]);
//# sourceMappingURL=725.185efaa8.js.map